<html>
	<head>
		<title>BubbleBase -- a Firebase demo game</title>
		<script src="https://code.createjs.com/easeljs-0.8.2.min.js"></script>
		<script src="https://code.createjs.com/tweenjs-0.6.2.min.js"></script>
		<style>
		html, body {
			overflow: hidden;
		}
		</style>
		<script>
		function init() {
			circle = new createjs.Shape();
			food = new createjs.Shape();
			stage = new createjs.Stage("gameCanvas");
			stage.canvas.width = window.innerWidth;
			stage.canvas.height = window.innerHeight;

			circle.graphics.beginFill("DeepSkyBlue").drawCircle(0, 0, 50);
			circle.x = 100;
			circle.y = 100;
			circle.vx = 0;
			circle.vy = 0;
			circle.radius = 50;
			stage.addChild(circle);
			

			food.graphics.beginFill("DeepSkyBlue").drawCircle(0, 0, 10);
			food.x = 900;
			food.y = 100;
			food.vx = 0;
			food.vy = 0;
			food.radius = 10;
			stage.addChild(food);
			
			createjs.Ticker.setFPS(60);
			createjs.Ticker.addEventListener("tick", tick);
		}

		function tick() {
			// update circle
			circle.y += circle.vy;
			circle.x += circle.vx;

			var a = circle.x - food.x;
			var b = circle.y - food.y;
			var c = Math.sqrt(a*a + b*b);
			if (c <= circle.radius + food.radius) {
				console.log("intersect!!!");
			}

			stage.update();
		}

		document.onkeydown = function (e) {
			e = e || window.event;

			if (e.keyCode == "38") { 		circle.vy = -10;	} // up
			else if (e.keyCode == "40") {	circle.vy = 10;		} //down
			else if (e.keyCode == "37") {	circle.vx = -10;	} // left
			else if (e.keyCode == "39") {	circle.vx = 10;		} // right
		}
		document.onkeyup = function (e) {
			e = e || window.event;

			if (e.keyCode == "38") {		circle.vy = 0;	} // up
			else if (e.keyCode == "40") {	circle.vy = 0;	} // down
			else if (e.keyCode == "37") {	circle.vx = 0;	} // left
			else if (e.keyCode == "39") {	circle.vx = 0;	} // right
			}
		}
		</script>
	</head>

	<body onload="init();">
		<canvas id="gameCanvas" width="500" height="300"></canvas>
	</body>
</html>